FileSettings:
    # FileName : "/home/henryi/sft/MaCh3Tutorial/Test.root"
    # FileName: "/home/henryi/scratch/Delayed_Fit_Long_Chains_no_delay_adapt_0_4.root"
    SkipFileLoading: True
    FileName: "/home/henryi/scratch/thinned_partial_chain.root"
    ChainName : "posteriors"
    Verbose : False
    MakeMLModel: True
    RunLLHScan: False
    RunMCMC: True


ParameterSettings:
    ParameterNames : ["sin2th","delm2", "delta", "xsec", "sk", "nd"]
    LabelName : "LogL"
    IgnoredParameters : ["LogL_systematic_xsec_cov", "Log",
                         "LogL_systematic_nddet_cov"]
    ParameterCuts : ["LogL<12345678", "delm2_23>0"]
    CircularParameter: ["delta_cp"]


MLSettings:
    FitterPackage : "TensorFlow"
    FitterName : "sequential"
    TestSize : 0.2

    MLOutputFile: "tf_model_normal_order_small.keras"
    MLScalerOutputName: "scaler_tf_model_normal_order_small.pkl"
    
    PlotOutputName : "tf_normal_order.pdf"
    
    AddFromExternalModel: False
    ExternalModel: "tf_model_normal_order.keras" 
    ExternalScaler: "scaler_tf_model_normal_order_small.pkl"

    FitterKwargs:
        BuildSettings:
            loss: 'mse'
            metrics: ['mae', 'mse']
            learning_rate: 0.1

        Layers:
            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'relu'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 256
                kernel_regularizer: True
                activation: 'tanh'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'relu'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'relu'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 256
                kernel_regularizer: True
                activation: 'tanh'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'relu'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 256
                kernel_regularizer: True
                activation: 'tanh'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'relu'
            - batchnorm:
                momentum: 0.99

            - dense:
                units: 512
                kernel_regularizer: True
                activation: 'tanh'
            - batchnorm:
                momentum: 0.99
    
            - dense:
                units: 1
                activation: 'linear'

        FitSettings:
            batch_size: 2048
            epochs: 100000
            validation_split: 0.1

MCMCSettings:
    NSteps: 1000000
    NChains: 20
    UpdateStep: 100
    MaxUpdateSteps: 500000

    MCMCOutput: "/home/henryi/scratch/mcmc_chain_GPU.h5"

LikelihoodScanSettings:
    NDivisions: 10000